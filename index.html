<html>

<head>
    <script>
        window.addEventListener("deviceorientation", function (e) {
            var str = '',
                alpha = e.alpha,
                beta = e.beta,
                gamma = e.gamma;

            str = 'alpha = ' + alpha + '\n';
            str += 'beta = ' + beta + '\n';
            str += 'gamma = ' + gamma + '\n';
            text = document.getElementById('result_text').textContent; //宣言
            document.getElementById('result_text').textContent = str;
        }, false);

        function post_function(result_string) {
            if (result_string === "granted") {
                // ユーザが許可した場合、文字列"granted"が返る
            }
            else if (result_string === "denied") {
                // ユーザが拒否した場合、文字列"denied"が返る
            }
        }
        function permission_request() {
            let text = document.getElementById('result_text').textContent; //宣言
            document.getElementById('result_text').textContent = 'textContentでHTMLを書き換えています';
            //            if (DeviceOrientationEvent
            //                && DeviceOrientationEvent.requestPermission
            //                && typeof DeviceOrientationEvent.requestPermission === 'function'
            //            ) {
            //                DeviceOrientationEvent.requestPermission().then(postf_unction);
            //            }
            DeviceOrientationEvent.requestPermission().then(postf_unction);
        }
    </script>
</head>

<body>
    <h1>実験5</h1>
    <button onclick="permission_request();">動作と方向へのアクセス許可</button>
    <p id="result_text">
        result
    </p>
</body>

</html>